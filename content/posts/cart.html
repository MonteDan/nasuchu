<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
  <title>Document</title>
</head>
<body>
  <div id="container"></div>

  <script>
    /*
    var cooks = document.cookie.split(";")
      .map(cookie => cookie.split("="))
      .reduce((accumulator, [key, value]) =>
        ({ ...accumulator, [key.trim()]: decodeURIComponent(value) }), 
    {});
    */
    var container = document.getElementById("container")
    
    try {
      var dict = JSON.parse(Cookies.get("names"));
    }
    catch(err) {
      Cookies.set("names", JSON.stringify({}))
      var dict = JSON.parse(Cookies.get("names"));
    }

    function add(title, pic, price, priceshown){

      var dict = JSON.parse(Cookies.get("names"));
      
      try {
        dict[title][0] += 1;
      }
      catch(err) {
        dict[title] = [1, pic, price, priceshown];
      }
  
      Cookies.set("names", JSON.stringify(dict));
      console.log(document.cookie)
      refresh()
    }
    function refresh() {
      container.innerHTML = ""
      Object.keys(dict).map(function (key, value) {
        container.innerHTML = "<h1>"+key.toString()+"</h1>"+"<br><h3>Poƒçet: "+dict[key][0].toString()+"</h3><br><h3>Cena: "+dict[key][2]*dict[key][0].toString()+',-</h3><img src="'+dict[key][1].toString()+'.png" alt="Obrazek">'+`<button onClick='add(`+'"'+key+'"'+","+'"'+dict[key][1].toString()+'"'+","+dict[key][2]+","+'"'+dict[key][3]+`")'>+</button>`
        console.log(`<button onClick='add(`+'"'+key+'"'+","+'"'+dict[key][1].toString()+'"'+","+dict[key][2]+","+'"'+dict[key][3]+`")'>+</button>`)
    })
    }
    refresh()
    


  </script>
</body>
</html>